<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تقييم الزيارة</title>
<script src="api.js"></script>

<style>
body { font-family: sans-serif; background: #f5f5f5; padding: 40px; text-align: center; }
.card { background: white; padding: 25px; border-radius: 12px; width: 350px; margin: auto; box-shadow: 0 0 10px #ddd; }
button { width: 90%; padding: 12px; margin: 10px 0; border-radius: 8px; background: #ffc107; border: none; cursor: pointer; }
</style>
</head>

<body>

<div class="card">
    <h2>تقييم آخر زيارة</h2>

    <button onclick="rate(1)">⭐</button>
    <button onclick="rate(2)">⭐⭐</button>
    <button onclick="rate(3)">⭐⭐⭐</button>
    <button onclick="rate(4)">⭐⭐⭐⭐</button>
    <button onclick="rate(5)">⭐⭐⭐⭐⭐</button>
</div>

<script>
async function rate(value) {
    const phone = localStorage.getItem("phone");
    const res = await apiGet({ action: "getByPhone", phone });

    const membership = res.customer.membership;

    await apiPost({
        action: "rateLastVisit",
        membership,
        rating: value
    });

    alert("تم تسجيل تقييمك");
    window.location.href = "customer-dashboard.html";
}
</script>

</body>
</html>
