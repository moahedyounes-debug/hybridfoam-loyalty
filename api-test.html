<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</title>
<style>
body { font-family: Tahoma; padding: 20px; background:#f2f2f2 }
.box { background:#fff; padding:20px; margin-bottom:20px; border-radius:10px; border:1px solid #ccc }
input, select, textarea { width:100%; padding:8px; margin:5px 0 10px; }
button { padding:10px 20px; background:#2563eb; color:#fff; border:none; border-radius:6px; cursor:pointer }
button:hover { background:#1e4fc7 }
h2 { margin-top:0 }
</style>
</head>
<body>

<h1>ğŸ”§ ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± API â€” Add / Update / Close</h1>

<!-- ===========================
     Ø¥Ø¶Ø§ÙØ© Ø²ÙŠØ§Ø±Ø©
=========================== -->
<div class="box">
<h2>â• Ø¥Ø¶Ø§ÙØ© Ø²ÙŠØ§Ø±Ø© (Add Visit)</h2>

<label>Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù„ÙˆØ­Ø©</label>
<input id="add_plate_numbers">

<label>Ø­Ø±ÙˆÙ Ø§Ù„Ù„ÙˆØ­Ø©</label>
<input id="add_plate_letters">

<label>Ø§Ù„Ø®Ø¯Ù…Ø§Øª (JSON)</label>
<textarea id="add_services" rows="3">[
  {"name":"ØºØ³ÙŠÙ„ Ø®Ø§Ø±Ø¬ÙŠ","price":30,"points":6,"commission":5},
  {"name":"ØºØ³ÙŠÙ„ Ø¯Ø§Ø®Ù„ÙŠ","price":40,"points":8,"commission":7}
]</textarea>

<label>Ø§Ù„Ø®ØµÙ…</label>
<input id="add_discount" value="0">

<label>Ø§Ù„Ø¥ÙƒØ±Ø§Ù…ÙŠØ©</label>
<input id="add_tip" value="0">

<label>Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</label>
<select id="add_status">
  <option value="ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹">ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹</option>
  <option value="Ù…Ø¯ÙÙˆØ¹">Ù…Ø¯ÙÙˆØ¹</option>
</select>

<label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
<select id="add_method">
  <option value="">â€” Ø§Ø®ØªØ± â€”</option>
  <option value="ÙƒØ§Ø´">ÙƒØ§Ø´</option>
  <option value="Ø´Ø¨ÙƒØ©">Ø´Ø¨ÙƒØ©</option>
  <option value="Ø¬Ø²Ø¦ÙŠ">Ø¬Ø²Ø¦ÙŠ</option>
</select>

<label>Ù…Ø¨Ù„Øº Ø§Ù„ÙƒØ§Ø´</label>
<input id="add_cash" value="0">

<label>Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ø¨ÙƒØ©</label>
<input id="add_card" value="0">

<button onclick="testAddVisit()">ØªÙ†ÙÙŠØ° Add Visit</button>

<p id="add_result"></p>
</div>

<!-- ===========================
     ØªØ­Ø¯ÙŠØ« Ø²ÙŠØ§Ø±Ø©
=========================== -->
<div class="box">
<h2>âœï¸ ØªØ­Ø¯ÙŠØ« Ø²ÙŠØ§Ø±Ø© (Update Visit)</h2>

<label>Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù„ÙˆØ­Ø©</label>
<input id="upd_plate">

<label>Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯</label>
<input id="upd_discount" value="0">

<label>Ø§Ù„Ø¥ÙƒØ±Ø§Ù…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
<input id="upd_tip" value="0">

<label>Ø§Ù„Ù…ÙˆØ¸Ù</label>
<input id="upd_emp">

<label>Ø§Ù„Ù…ÙˆÙ‚Ù</label>
<input id="upd_park">

<button onclick="testUpdateVisit()">ØªÙ†ÙÙŠØ° Update Visit</button>

<p id="upd_result"></p>
</div>

<!-- ===========================
     Ø¥ØºÙ„Ø§Ù‚ Ø²ÙŠØ§Ø±Ø©
=========================== -->
<div class="box">
<h2>ğŸ’³ Ø¥ØºÙ„Ø§Ù‚ Ø²ÙŠØ§Ø±Ø© (Close Visit)</h2>

<label>Ø±Ù‚Ù… Ø§Ù„ØµÙ (row)</label>
<input id="close_row">

<label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
<select id="close_method">
  <option value="ÙƒØ§Ø´">ÙƒØ§Ø´</option>
  <option value="Ø´Ø¨ÙƒØ©">Ø´Ø¨ÙƒØ©</option>
  <option value="Ø¬Ø²Ø¦ÙŠ">Ø¬Ø²Ø¦ÙŠ</option>
</select>

<label>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙØ¹</label>
<input id="close_total" value="0">

<label>Ù…Ø¨Ù„Øº Ø§Ù„ÙƒØ§Ø´</label>
<input id="close_cash" value="0">

<label>Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ø¨ÙƒØ©</label>
<input id="close_card" value="0">

<label>Ø§Ù„Ø®ØµÙ…</label>
<input id="close_discount" value="0">

<label>Ø§Ù„Ø¥ÙƒØ±Ø§Ù…ÙŠØ©</label>
<input id="close_tip" value="0">

<button onclick="testCloseVisit()">ØªÙ†ÙÙŠØ° Close Visit</button>

<p id="close_result"></p>
</div>

<script>
// ===========================
// 1) ADD VISIT
// ===========================
async function testAddVisit() {
  const res = await fetch("YOUR_API_URL?action=addVisit", {
    method: "POST",
    body: new URLSearchParams({
      plate_numbers: add_plate_numbers.value,
      plate_letters: add_plate_letters.value,
      services: add_services.value,
      discount: add_discount.value,
      tip: add_tip.value,
      payment_status: add_status.value,
      payment_method: add_method.value,
      cash_amount: add_cash.value,
      card_amount: add_card.value
    })
  });
  add_result.textContent = await res.text();
}

// ===========================
// 2) UPDATE VISIT
// ===========================
async function testUpdateVisit() {
  const res = await fetch("YOUR_API_URL?action=updateVisit", {
    method: "POST",
    body: new URLSearchParams({
      plate_numbers: upd_plate.value,
      discount: upd_discount.value,
      tip: upd_tip.value,
      employee_in: upd_emp.value,
      parking_slot: upd_park.value
    })
  });
  upd_result.textContent = await res.text();
}

// ===========================
// 3) CLOSE VISIT
// ===========================
async function testCloseVisit() {
  const res = await fetch("YOUR_API_URL?action=closeVisit", {
    method: "POST",
    body: new URLSearchParams({
      row: close_row.value,
      payment_method: close_method.value,
      total_paid: close_total.value,
      cash_amount: close_cash.value,
      card_amount: close_card.value,
      discount: close_discount.value,
      tip: close_tip.value
    })
  });
  close_result.textContent = await res.text();
}
</script>

</body>
</html>
