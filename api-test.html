<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>API Universal Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            font-family: "Tajawal", sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        textarea {
            width: 100%;
            height: 220px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            margin-top: 10px;
            font-size: 14px;
        }
        button {
            padding: 12px 20px;
            margin: 5px 0;
            width: 100%;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #005fcc;
        }
    </style>
</head>

<body>

<h2>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ API Ø§Ù„Ø¬Ø¯ÙŠØ¯</h2>

<h3>ğŸŸ¦ GET TEST</h3>
<button onclick="testGet('Car-Type')">GET Car-Type</button>
<button onclick="testGet('Branches')">GET Branches</button>
<button onclick="testGet('Cars')">GET Cars</button>
<button onclick="testGet('Customers')">GET Customers</button>

<h3>ğŸŸ¨ POST TEST</h3>
<button onclick="testAdd()">POST addRow â†’ Cars</button>
<button onclick="testUpdate()">POST updateRow â†’ Cars</button>
<button onclick="testDelete()">POST deleteRow â†’ Cars</button>

<textarea id="output" placeholder="Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§..."></textarea>

<script src="api.js"></script>

<script>

// ========== GET TEST ==========
async function testGet(sheet) {
    const res = await apiGet({
        action: "getAll",
        sheet: sheet
    });

    document.getElementById("output").value =
        "GET " + sheet + ":\n\n" + JSON.stringify(res, null, 2);
}

// ========== ADD TEST ==========
async function testAdd() {
    const row = [
        "TEST-" + Date.now(),   // car_membership
        '="0500000000"',        // phone
        "Toyota",               // brand
        "Sedan",                // size
        "Ø£ Ø¨ Ø¬",                // plate_letters
        "1234",                 // plate_numbers
        "Riyadh",               // city
        new Date()              // created_at
    ];

    const res = await apiPost({
        action: "addRow",
        sheet: "Cars",
        values: JSON.stringify(row)
    });

    document.getElementById("output").value =
        "ADD ROW:\n\n" + JSON.stringify(res, null, 2);
}

// ========== UPDATE TEST ==========
async function testUpdate() {
    const row = [
        "UPDATED",
        '="0599999999"',
        "Lexus",
        "SUV",
        "Ø¯ Ø± Ø³",
        "9999",
        "Jeddah",
        new Date()
    ];

    const res = await apiPost({
        action: "updateRow",
        sheet: "Cars",
        row: 2, // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙƒÙ…Ø«Ø§Ù„
        values: JSON.stringify(row)
    });

    document.getElementById("output").value =
        "UPDATE ROW:\n\n" + JSON.stringify(res, null, 2);
}

// ========== DELETE TEST ==========
async function testDelete() {
    const res = await apiPost({
        action: "deleteRow",
        sheet: "Cars",
        row: 2 // Ø­Ø°Ù Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙƒÙ…Ø«Ø§Ù„
    });

    document.getElementById("output").value =
        "DELETE ROW:\n\n" + JSON.stringify(res, null, 2);
}

</script>

</body>
</html>
