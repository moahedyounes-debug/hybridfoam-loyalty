<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>ุฑุบูุฉ ุงููุฌูู - ุฅุฏุงุฑุฉ ุงูุฒูุงุฑุงุช</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS + JS -->
    <link rel="stylesheet" href="visit-manager.css">
    <script src="api.js"></script>
    <script src="visit-manager.js" defer></script>
</head>

<body>

    <!-- ุงูุนููุงู -->
    <div class="page-title">
        <h1>ุฑุบูุฉ ุงููุฌูู</h1>
        <h2>ุฅุฏุงุฑุฉ ุงูุฒูุงุฑุงุช</h2>
    </div>

    <!-- ุงูุณูุงุฑุงุช ุฏุงุฎู ุงููุบุณูุฉ -->
    <div class="section">
        <h3 class="section-title">๐ ุณูุงุฑุงุช ุฏุงุฎู ุงููุบุณูุฉ (ุบูุฑ ูุฏููุนุฉ)</h3>
        <div id="activeVisitsList" class="cards"></div>
        <button id="btnRefreshActive" class="btn-secondary full">ุชุญุฏูุซ ุงููุงุฆูุฉ</button>
    </div>

    <!-- ุชุณุฌูู ุงูุฒูุงุฑุฉ -->
    <div id="visitBox" class="section">
        <h3 class="section-title">ุชุณุฌูู ุฒูุงุฑุฉ</h3>

        <!-- ุจูุงูุงุช ุงูููุญุฉ -->
        <div class="row">
            <div>
                <label>ุฃุฑูุงู ุงูููุญุฉ</label>
                <input type="text" id="plate_numbers" placeholder="1234">
            </div>
            <div>
                <label>ุญุฑูู ุงูููุญุฉ (ุงุฎุชูุงุฑู)</label>
                <input type="text" id="plate_letters" placeholder="ABC">
            </div>
        </div>

        <!-- ุงูุณูุงุฑุฉ -->
        <div class="row">
            <div>
                <label>ุจุฑุงูุฏ ุงูุณูุงุฑุฉ</label>
                <select id="car_type"></select>
            </div>
            <div>
                <label>ููุฏูู ุงูุณูุงุฑุฉ</label>
                <select id="car_model"></select>
            </div>
        </div>

        <div class="row">
            <div>
                <label>ุงูุญุฌู</label>
                <input type="text" id="car_size" readonly>
            </div>
        </div>

        <!-- ุงูุฎุฏูุฉ -->
        <div class="row">
            <div>
                <label>ููุน ุงูุฎุฏูุฉ</label>
                <select id="service_type"></select>
            </div>
            <div>
                <label>ุชูุงุตูู ุงูุฎุฏูุฉ</label>
                <select id="service_detail"></select>
            </div>
        </div>

        <!-- ุงูุณุนุฑ ูุงูููุงุท -->
        <div class="row">
            <div>
                <label>ุงูุณุนุฑ</label>
                <input type="number" id="price" readonly>
            </div>
            <div>
                <label>ุงูููุงุท</label>
                <input type="number" id="points" readonly>
            </div>
        </div>

        <!-- ุฅุถุงูุฉ ุฎุฏูุฉ -->
        <button id="btnAddService" class="btn-secondary full">ุฅุถุงูุฉ ุฎุฏูุฉ +</button>

        <div id="servicesList" class="services-box"></div>

        <h3 class="total">ุงูุฅุฌูุงูู: <span id="totalPrice">0</span> ุฑูุงู</h3>

        <!-- ุงูุฎุตู / ุงูุฅูุฑุงููุฉ / ุงููููู -->
        <div class="row">
            <div>
                <label>ุงูุฎุตู</label>
                <input type="number" id="discount" placeholder="0">
            </div>
            <div>
                <label>ุงูุฅูุฑุงููุฉ</label>
                <input type="number" id="tip" placeholder="0">
            </div>
        </div>

        <div class="row">
            <div>
                <label>ุฑูู ุงููููู</label>
                <select id="parking_slot">
                    <option value="">โ ุงุฎุชุฑ ุฑูู ุงููููู โ</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                </select>
            </div>
        </div>

        <!-- ุงูููุธู ูุงููุฑุน -->
        <div class="row">
            <div>
                <label>ุงูููุธู</label>
                <select id="employee_in"></select>
            </div>
            <div>
                <label>ุงููุฑุน</label>
                <select id="branch">
                    <option value="Makkah - ููุฉ">Makkah - ููุฉ</option>
                </select>
            </div>
        </div>

        <!-- ุงูุฏูุน -->
        <div class="row">
            <div>
                <label>ุญุงูุฉ ุงูุฏูุน</label>
                <select id="payment_status">
                    <option value="">โ ุงุฎุชุฑ ุญุงูุฉ ุงูุฏูุน โ</option>
                    <option value="ูุฏููุน">ูุฏููุน</option>
                    <option value="ุบูุฑ ูุฏููุน">ุบูุฑ ูุฏููุน</option>
                </select>
            </div>
            <div id="payment_method_wrapper" style="display:none;">
                <label>ุทุฑููุฉ ุงูุฏูุน</label>
                <select id="payment_method">
                    <option value="">โ ุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน โ</option>
                    <option value="ูุงุด">ูุงุด</option>
                    <option value="ุดุจูุฉ">ุดุจูุฉ</option>
                    <option value="ุฌุฒุฆู">ุฌุฒุฆู (ูุงุด + ุดุจูุฉ)</option>
                </select>
            </div>
        </div>

        <!-- ุงูุฏูุน ุงูุฌุฒุฆู -->
        <div id="partial_payment_box" style="display:none; margin-top:10px;">
            <div class="row">
                <div>
                    <label>ูุจูุบ ุงููุงุด</label>
                    <input type="number" id="cash_amount" placeholder="0">
                </div>
                <div>
                    <label>ูุจูุบ ุงูุดุจูุฉ</label>
                    <input type="number" id="card_amount" placeholder="0">
                </div>
            </div>

            <h4 style="margin-top:10px;">
                ุงููุฌููุน ุงููุฏููุน: <span id="paid_total">0</span> ุฑูุงู
            </h4>
        </div>

        <button id="btnSubmitVisit" class="btn-primary full">ุชุณุฌูู ุงูุฒูุงุฑุฉ</button>
    </div>

    <!-- ููุฏุงู ุงูุฏูุน -->
    <div id="modal" style="display:none;">
        <div class="modal-box">
            <h3>ุชุญุฏูุซ ุงูุฏูุน: <span id="modal_method"></span></h3>
            <p style="margin-top:5px;">
                ุงูุฅุฌูุงูู ุงููุทููุจ: <span id="modal_total">0 ุฑูุงู</span>
            </p>

            <div id="cash_box" style="margin-top:15px;">
                <label>ูุจูุบ ุงููุงุด</label>
                <input type="number" id="modal_cash" placeholder="0">
            </div>

            <div id="card_box" style="margin-top:15px;">
                <label>ูุจูุบ ุงูุดุจูุฉ</label>
                <input type="number" id="modal_card" placeholder="0">
            </div>

            <div class="modal-actions" style="margin-top:20px; display:flex; gap:10px;">
                <button id="modal_confirm" class="btn-primary" style="flex:1;">ุชุฃููุฏ</button>
                <button id="modal_close" class="btn-secondary" style="flex:1; background:#dc2626;">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงูุชุนุฏูู (ูุจุฏุฆููุง ุจุณ placeholder) -->
    <div id="editModal" class="modal" style="display:none;">
        <div class="modal-box">
            <span id="editClose" class="close">&times;</span>
            <div id="editContent"></div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast-container"></div>

</body>

</html>
