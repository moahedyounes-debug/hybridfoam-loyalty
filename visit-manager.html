HTML :

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฑุบูุฉ ุงููุฌูู - ุฅุฏุงุฑุฉ ุงูุฒูุงุฑุงุช</title>
    <link rel="stylesheet" href="visit-manager.css">
    <script src="api.js"></script>
</head>
<body>
    <div class="container">
        <!-- ุงูุนููุงู -->
        <div class="page-header">
            <h1>ุฑุบูุฉ ุงููุฌูู</h1>
            <h2>ุฅุฏุงุฑุฉ ุงูุฒูุงุฑุงุช</h2>
        </div>

        <!-- ุดุฑูุท ุงูููุฎุต -->
        <div class="summary-bar">
            <div class="summary-item">
                <div class="label">ุงูุฒูุงุฑุงุช ุงููุดุทุฉ</div>
                <div class="value" id="summaryActive">0</div>
            </div>
            <div class="summary-item">
                <div class="label">ุงูุณูุงุฑุงุช ุญุงููุงู</div>
                <div class="value" id="summaryCars">0</div>
            </div>
            <div class="summary-item">
                <div class="label">ุฅุฌูุงูู ุงููุณุชุญู</div>
                <div class="value" id="summaryTotal">0 ุฑูุงู</div>
            </div>
        </div>

        <!-- ุงูุณูุงุฑุงุช ุฏุงุฎู ุงููุบุณูุฉ -->
        <div class="section">
            <h3 class="section-title">๐ ุณูุงุฑุงุช ุฏุงุฎู ุงููุบุณูุฉ (ุบูุฑ ูุฏููุนุฉ)</h3>
            <div id="activeVisitsList" class="cards">
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </div>
            <button id="btnRefreshActive" class="btn-secondary full">๐ ุชุญุฏูุซ ุงููุงุฆูุฉ</button>
        </div>

        <!-- ุชุณุฌูู ุงูุฒูุงุฑุฉ -->
        <div id="visitBox" class="section">
            <h3 class="section-title">๐ ุชุณุฌูู ุฒูุงุฑุฉ ุฌุฏูุฏุฉ</h3>

            <!-- ุจูุงูุงุช ุงูููุญุฉ -->
            <div class="row">
                <div>
                    <label>ุฃุฑูุงู ุงูููุญุฉ *</label>
                    <input type="text" id="plate_numbers" placeholder="1234" required>
                </div>
                <div>
                    <label>ุญุฑูู ุงูููุญุฉ</label>
                    <input type="text" id="plate_letters" placeholder="ABC">
                </div>
            </div>

            <!-- ุงูุณูุงุฑุฉ -->
            <div class="row">
                <div>
                    <label>ุจุฑุงูุฏ ุงูุณูุงุฑุฉ *</label>
                    <select id="car_type" required>
                        <option value="">โ ุงุฎุชุฑ ุงูุจุฑุงูุฏ โ</option>
                    </select>
                </div>
                <div>
                    <label>ููุฏูู ุงูุณูุงุฑุฉ *</label>
                    <select id="car_model" required>
                        <option value="">โ ุงุฎุชุฑ ุงูููุฏูู โ</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div>
                    <label>ุงูุญุฌู</label>
                    <input type="text" id="car_size" readonly>
                </div>
            </div>

            <!-- ุงูุฎุฏูุฉ -->
            <div class="row">
                <div>
                    <label>ููุน ุงูุฎุฏูุฉ *</label>
                    <select id="service_type" required>
                        <option value="">โ ุงุฎุชุฑ ุงูููุน โ</option>
                    </select>
                </div>
                <div>
                    <label>ุชูุงุตูู ุงูุฎุฏูุฉ *</label>
                    <select id="service_detail" required>
                        <option value="">โ ุงุฎุชุฑ ุงูุฎุฏูุฉ โ</option>
                    </select>
                </div>
            </div>

            <!-- ุงูุณุนุฑ ูุงูููุงุท -->
            <div class="row">
                <div>
                    <label>ุงูุณุนุฑ</label>
                    <input type="number" id="price" readonly>
                </div>
                <div>
                    <label>ุงูููุงุท / ุงูุนูููุฉ</label>
                    <input type="number" id="points" readonly>
                </div>
            </div>

            <!-- ุฅุถุงูุฉ ุฎุฏูุฉ -->
            <button id="btnAddService" class="btn-secondary full">โ ุฅุถุงูุฉ ุฎุฏูุฉ</button>

            <div id="servicesList" class="services-box"></div>

            <div class="total">ุงูุฅุฌูุงูู: <span id="totalPrice">0</span> ุฑูุงู</div>

            <!-- ุงูุฎุตู / ุงูุฅูุฑุงููุฉ / ุงููููู -->
            <div class="row">
                <div>
                    <label>ุงูุฎุตู</label>
                    <input type="number" id="discount" placeholder="0" value="0">
                </div>
                <div>
                    <label>ุงูุฅูุฑุงููุฉ</label>
                    <input type="number" id="tip" placeholder="0" value="0">
                </div>
            </div>

            <div class="row">
                <div>
                    <label>ุฑูู ุงููููู *</label>
                    <select id="parking_slot" required>
                        <option value="">โ ุงุฎุชุฑ ุงููููู โ</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
            </div>

            <!-- ุงูููุธู ูุงููุฑุน -->
            <div class="row">
                <div>
                    <label>ุงูููุธู *</label>
                    <select id="employee_in" required>
                        <option value="">โ ุงุฎุชุฑ ุงูููุธู โ</option>
                    </select>
                </div>
                <div>
                    <label>ุงููุฑุน *</label>
                    <select id="branch" required>
                        <option value="">โ ุงุฎุชุฑ ุงููุฑุน โ</option>
                    </select>
                </div>
            </div>

            <!-- ุงูุฏูุน -->
            <div class="row">
                <div>
                    <label>ุญุงูุฉ ุงูุฏูุน *</label>
                    <select id="payment_status" required>
                        <option value="">โ ุงุฎุชุฑ ุงูุญุงูุฉ โ</option>
                        <option value="ูุฏููุน">ูุฏููุน</option>
                        <option value="ุบูุฑ ูุฏููุน">ุบูุฑ ูุฏููุน</option>
                    </select>
                </div>
                <div id="payment_method_wrapper" style="display:none;">
                    <label>ุทุฑููุฉ ุงูุฏูุน *</label>
                    <select id="payment_method">
                        <option value="">โ ุงุฎุชุฑ ุงูุทุฑููุฉ โ</option>
                        <option value="ูุงุด">ูุงุด</option>
                        <option value="ุดุจูุฉ">ุดุจูุฉ</option>
                        <option value="ุฌุฒุฆู">ุฌุฒุฆู (ูุงุด + ุดุจูุฉ)</option>
                    </select>
                </div>
            </div>

            <!-- ุงูุฏูุน ุงูุฌุฒุฆู -->
            <div id="partial_payment_box" style="display:none; margin-top:15px;">
                <div class="row">
                    <div>
                        <label>ูุจูุบ ุงููุงุด</label>
                        <input type="number" id="cash_amount" placeholder="0">
                    </div>
                    <div>
                        <label>ูุจูุบ ุงูุดุจูุฉ</label>
                        <input type="number" id="card_amount" placeholder="0">
                    </div>
                </div>
                <div class="total">ุงููุฌููุน ุงููุฏููุน: <span id="paid_total">0</span> ุฑูุงู</div>
            </div>

            <button id="btnSubmitVisit" class="btn-primary full" style="margin-top:20px;" onclick="submitVisit()">๐พ ุชุณุฌูู ุงูุฒูุงุฑุฉ</button>
        </div>
    </div>

<!-- ููุฏุงู ุงูุฏูุน -->
<div id="paymentModal" class="modal-overlay">
    <div class="modal-box">

        <div class="modal-header">
            <h3>๐ณ ุชุญุฏูุซ ุงูุฏูุน</h3>
            <button id="closePaymentModal" class="btn-danger small">โ</button>
        </div>

        <label>ุทุฑููุฉ ุงูุฏูุน</label>
        <select id="modal_method_select">
            <option value="ูุงุด">ูุงุด</option>
            <option value="ุดุจูุฉ">ุดุจูุฉ</option>
            <option value="ุฌุฒุฆู">ุฌุฒุฆู (ูุงุด + ุดุจูุฉ)</option>
        </select>

        <p><b>ุงูุฅุฌูุงูู ูุจู ุงูุฎุตู:</b> <span id="modal_total_before">0 ุฑูุงู</span></p>

        <!-- ุงูุฎุตู -->
        <div style="margin-top:15px;">
            <label>ุงูุฎุตู</label>
            <input type="number" id="modal_discount_input" placeholder="0">
        </div>

        <p><b>ุงูุฎุตู ุงูุญุงูู:</b> <span id="modal_discount">0 ุฑูุงู</span></p>

        <p><b>ุงูุฅุฌูุงูู ุจุนุฏ ุงูุฎุตู:</b> <span id="modal_total_after">0 ุฑูุงู</span></p>

        <!-- ุงูุฅูุฑุงููุฉ -->
        <div style="margin-top:15px;">
            <label>ุงูุฅูุฑุงููุฉ</label>
            <input type="number" id="modal_tip_input" placeholder="0">
        </div>

        <p><b>ุงูุฅูุฑุงููุฉ ุงูุญุงููุฉ:</b> <span id="modal_tip">0 ุฑูุงู</span></p>

        <!-- ุงูุฏูุน ุงูุฌุฒุฆู -->
        <div id="cash_box" style="display:none; margin-top:15px;">
            <label>ูุจูุบ ุงููุงุด</label>
            <input type="number" id="modal_cash" placeholder="0">
        </div>

        <div id="card_box" style="display:none; margin-top:15px;">
            <label>ูุจูุบ ุงูุดุจูุฉ</label>
            <input type="number" id="modal_card" placeholder="0">
        </div>

        <div class="modal-actions">
            <button id="modal_confirm" class="btn-primary">โ ุชุฃููุฏ</button>
            <button id="modal_close" class="btn-secondary">ุฅุบูุงู</button>
        </div>

    </div>
</div>

    <!-- ููุฏุงู ุงูุชุนุฏูู -->
    <div id="editModal" class="modal-overlay">
        <div class="modal-box large">
            <div class="modal-header">
                <h3>โ๏ธ ุชุนุฏูู ุงูุฒูุงุฑุฉ</h3>
                <button id="editClose" class="btn-danger small">โ</button>
            </div>

            <div class="tabs">
                <button class="tab-btn active" data-tab="tab-swap">๐ ุชุจุฏูู ุฎุฏูุฉ</button>
                <button class="tab-btn" data-tab="tab-delete">๐๏ธ ุญุฐู ุฎุฏูุฉ</button>
                <button class="tab-btn" data-tab="tab-add">โ ุฅุถุงูุฉ ุฎุฏูุฉ</button>
                <button class="tab-btn" data-tab="tab-emp">๐ค ุชุบููุฑ ุงูููุธู</button>
                <button class="tab-btn" data-tab="tab-disc">๐ฐ ุชุบููุฑ ุงูุฎุตู</button>
                <button class="tab-btn" data-tab="tab-tip">๐ ุชุบููุฑ ุงูุฅูุฑุงููุฉ</button>
            </div>

            <div class="tab-content">
<div id="tab-swap" class="tab-pane">
    <label>ุงุฎุชุฑ ุงูุฎุฏูุฉ ุงูุญุงููุฉ</label>
    <select id="swapOldServiceSelect"></select>

    <label style="margin-top:15px;">ุงุฎุชุฑ ุงูุฎุฏูุฉ ุงูุฌุฏูุฏุฉ</label>
    <select id="swapNewServiceSelect"></select>

    <button id="swapConfirm" class="btn-primary full">ุชุฃููุฏ ุงูุชุจุฏูู</button>
</div>

                <div id="tab-delete" class="tab-pane">
                    <label>ุงุฎุชุฑ ุงูุฎุฏูุฉ ุงููุฑุงุฏ ุญุฐููุง</label>
                    <select id="deleteServiceSelect"></select>
                    <button id="deleteConfirm" class="btn-danger full">ุญุฐู ุงูุฎุฏูุฉ</button>
                </div>

                <div id="tab-add" class="tab-pane">
                    <label>ุงุฎุชุฑ ุฎุฏูุฉ ููุฅุถุงูุฉ</label>
                    <select id="addServiceSelect"></select>
                    <button id="addConfirm" class="btn-primary full">ุฅุถุงูุฉ ุงูุฎุฏูุฉ</button>
                </div>

                <div id="tab-emp" class="tab-pane">
                    <label>ุงุฎุชุฑ ุงูููุธู ุงูุฌุฏูุฏ</label>
                    <select id="empSelect"></select>
                    <button id="empConfirm" class="btn-primary full">ุชุญุฏูุซ ุงูููุธู</button>
                </div>

                <div id="tab-disc" class="tab-pane">
                    <label>ุงูุฎุตู ุงูุฌุฏูุฏ</label>
                    <input type="number" id="discInput" placeholder="0">
                    <button id="discConfirm" class="btn-primary full">ุชุญุฏูุซ ุงูุฎุตู</button>
                </div>

                <div id="tab-tip" class="tab-pane">
                    <label>ุงูุฅูุฑุงููุฉ ุงูุฌุฏูุฏุฉ</label>
                    <input type="number" id="tipInput" placeholder="0">
                    <button id="tipConfirm" class="btn-primary full">ุชุญุฏูุซ ุงูุฅูุฑุงููุฉ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast-container"></div>

    <!-- JavaScript -->
    <script src="visit-manager.js"></script>
</body>
</html>
