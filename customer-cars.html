<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>سياراتي</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body{font-family:"Tajawal",sans-serif;background:#f5f5f5;padding:20px;}
        .container{max-width:500px;margin:auto;}
        .car{background:white;padding:15px;border-radius:12px;box-shadow:0 4px 12px #0002;margin-bottom:15px;}
        .row{display:flex;justify-content:space-between;margin-bottom:6px;}
        .label{color:#777;}
        .value{font-weight:600;}
        .btn{width:100%;padding:12px;margin-top:15px;border:none;border-radius:8px;background:#007bff;color:white;font-size:16px;cursor:pointer;}
        .empty{text-align:center;margin-top:40px;color:#777;}
    </style>
</head>

<body>

<div class="container">
    <h2>سياراتي</h2>
    <div id="list"></div>

    <button class="btn" onclick="window.location.href='customer-add-car.html'">
        إضافة سيارة جديدة
    </button>
</div>

<script src="api.js"></script>

<script>
let CUSTOMER = JSON.parse(localStorage.getItem("customer"));
let PHONE = CUSTOMER.phone;

window.onload = async function(){
    const list=document.getElementById("list");

    const res=await apiGet({
        action:"getCarsByPhone",
        phone:PHONE
    });

    if(!res.success || res.cars.length===0){
        list.innerHTML='<div class="empty">لا توجد سيارات مسجلة</div>';
        return;
    }

    res.cars.forEach(c=>{
        const div=document.createElement("div");
        div.className="car";

        div.innerHTML=`
            <div class="row"><span class="label">عضوية السيارة:</span><span class="value">${c[0]}</span></div>
            <div class="row"><span class="label">السيارة:</span><span class="value">${c[2]} (${c[3]})</span></div>
            <div class="row"><span class="label">اللوحة:</span><span class="value">${c[5]} ${c[4]}</span></div>
            <div class="row"><span class="label">المدينة:</span><span class="value">${c[6]}</span></div>
        `;

        list.appendChild(div);
    });
};
</script>

</body>
</html>
